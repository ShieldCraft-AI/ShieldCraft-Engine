# FastAPI Application Template
# Generated by ShieldCraft Engine v1.0

from fastapi import FastAPI, HTTPException, Depends
from fastapi.middleware.cors import CORSMiddleware
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
import uvicorn
from typing import List, Optional
from pydantic import BaseModel
import os
from dotenv import load_dotenv

# Load environment variables
load_dotenv()

# Initialize FastAPI app
app = FastAPI(
    title="{{ app_name }}",
    description="{{ app_description }}",
    version="1.0.0",
    docs_url="/docs",
    redoc_url="/redoc"
)

# CORS middleware
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # Configure based on requirements
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Security
security = HTTPBearer()

# Database dependency (to be implemented)
# async def get_db():
#     # Database connection logic here
#     pass

@app.get("/")
async def root():
    return {"message": "Welcome to {{ app_name }} API"}

@app.get("/health")
async def health_check():
    return {"status": "healthy"}

# API routes will be inserted here
{{ api_routes }}

if __name__ == "__main__":
    port = int(os.getenv("PORT", 8000))
    uvicorn.run(
        "main:app",
        host="0.0.0.0",
        port=port,
        reload=True if os.getenv("ENV") == "development" else False
    )